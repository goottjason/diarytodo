<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{/layout/layout.html}">
<th:block layout:fragment="head-extra">
  <!-- 추가적인 헤드가 있다면, 추가할 수 있음 -->
  <title>cboard - write</title>
  <!-- 이곳에만 페이지별 추가 스타일/스크립트 작성 -->
  <link th:href="@{/css/cboard-write.css}" rel="stylesheet" />
  <script th:src="@{/js/cboard-write.js}"></script>
</th:block>

<body>
<!-- 전체 콘텐츠 fragment -->
<div layout:fragment="content">
  <div class="container py-4" style="max-width: 800px;">
    <form th:action="@{/cboard/write}" method="post" th:object="${cBoardReqDTO}">
      <!-- 에러 메시지 -->
      <div class="text-center mb-3" style="min-height: 1.5em;">
        <span th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-danger"></span>
        <span th:if="${#fields.hasErrors('content')}" th:errors="*{content}" class="text-danger"></span>
      </div>

      <!-- 제목 & 작성자 한 줄에 -->
      <div class="row align-items-center mb-3 g-3">
        <div class="col-auto" style="width: 70px;">
          <label for="title" class="col-form-label fw-bold" style="font-size: 1.05rem;">제목</label>
        </div>
        <div class="col">
          <input type="text"
                 th:field="*{title}"
                 id="title"
                 class="form-control border-0 border-bottom shadow-none px-0"
                 style="background: transparent; border-radius: 0; font-size: 1.15rem;"
                 placeholder="제목을 입력하세요."
                 autocomplete="off">
        </div>
        <div class="col-auto" style="width: 70px;">
          <label class="col-form-label fw-bold" style="font-size: 1.05rem;">작성자</label>
        </div>
        <input type="hidden" name="writer" th:value="${session.loginMember.loginId}">
        <div class="col-auto">
          <div class="form-control-plaintext ps-1" style="font-size: 1.05rem; min-width: 80px;" th:text="${session.loginMember.loginId}"></div>
        </div>
      </div>

      <!-- 내용 -->
      <div class="mb-3">
      <textarea th:field="*{content}"
                class="form-control p-3"
                rows="10"
                style="resize: vertical; min-height: 180px;"
                placeholder="내용을 입력하세요."></textarea>
      </div>

      <!-- 파일 업로드 -->
      <div id="drop-area"
           class="rounded-3 p-4 text-center bg-light position-relative"
           style="cursor:pointer; transition: background 0.2s; border:2px solid #7a7a7a;">
        <!-- 투명 input이 drop-area 전체를 덮음 -->
        <input type="file" id="fileElem" multiple class="file-input-overlay">
        <p class="mb-2"><i class="bi bi-upload" style="font-size:2rem; color:#7a7a7a;"></i></p>
        <p class="mb-1" style="color:#7a7a7a;">파일을 이곳에 드래그하거나 클릭하여 첨부하세요</p>
        <div id="file-list" class="text-secondary small"></div>
      </div>

      <!-- 버튼 -->
      <div class="d-flex justify-content-end gap-3 mt-4">
        <button type="submit" class="btn btn-secondary px-4 py-2">글쓰기</button>
        <button type="reset" class="btn btn-outline-danger px-4 py-2">취소</button>
      </div>
    </form>
  </div>
</div>
</body>
</html>